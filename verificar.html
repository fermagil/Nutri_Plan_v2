<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Verificar Rol</title>
</head>
<body>
  <button onclick="verificar()">Verificar rol</button>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    const config = {
      apiKey: "AIzaSyChC7s5NN-z-dSjqeXDaks7gaNaVCJAu7Q",
      authDomain: "nutriplanv2.firebaseapp.com",
      projectId: "nutriplanv2",
      appId: "1:653707489758:web:9133d1d1620825c385ed4f"
    };

    const app = initializeApp(config);
    const auth = getAuth(app);

    // ‚úÖ Funci√≥n que verifica el rol
    async function verificar() {
      try {
        // üëá Usa TU email y contrase√±a real
        await signInWithEmailAndPassword(auth, "fernandojose.martinez@murciaeduca.es", "JuegosOlimpicos2025!!");
        const token = await auth.currentUser.getIdTokenResult();
        console.log("Claims:", token.claims);
        if (token.claims.rol === "salud_escolar") {
          alert("‚úÖ Rol asignado correctamente.");
        } else {
          alert("‚ùå No tienes el rol 'salud_escolar'.");
        }
      } catch (error) {
        console.error("Error:", error);
        alert("Error al verificar: " + error.message);
      }
    }

    // ‚úÖ Exponer la funci√≥n globalmente para onclick
    window.verificar = verificar;
  </script>
</body>
</html>
